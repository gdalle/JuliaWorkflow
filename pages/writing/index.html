<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/ModernJuliaWorkflows/libs/highlight/styles/github.min.css"> <link rel=stylesheet  href="/ModernJuliaWorkflows/css/jtd.css"> <style> /* #148 wrap long header */ .franklin-content a.header-anchor, .franklin-toc li a { word-wrap: break-word; white-space: normal; } </style> <title>Writing Julia code</title> <div class=page-wrap > <div class=side-bar > <div class=header > <a href="/ModernJuliaWorkflows/" class=title > Modern Julia Workflows </a> </div> <label for=show-menu  class=show-menu >MENU</label> <input type=checkbox  id=show-menu  role=button > <div class=menu  id=side-menu > <ul class=menu-list > <li class="menu-list-item "><a href="/ModernJuliaWorkflows/" class="menu-list-link ">Home</a> <li class="menu-list-item active"><a href="/ModernJuliaWorkflows/pages/writing/" class="menu-list-link active">Writing</a> <ol class="menu-list-child-list "> <li class="menu-list-item "><a href="#installation" class=menu-list-link >Installation</a> <li class="menu-list-item "><a href="#running_code" class=menu-list-link >Running code</a> <li class="menu-list-item "><a href="#development_environments" class=menu-list-link >Development environments</a> <li class="menu-list-item "><a href="#package_management" class=menu-list-link >Package management</a> <li class="menu-list-item "><a href="#esthetics" class=menu-list-link >Esthetics</a> <li class="menu-list-item "><a href="#debugging" class=menu-list-link >Debugging</a> <li class="menu-list-item "><a href="#other_languages" class=menu-list-link >Other languages</a> <li class="menu-list-item "><a href="#getting_help" class=menu-list-link >Getting help</a> </ol> <li class="menu-list-item "><a href="/ModernJuliaWorkflows/pages/sharing/" class="menu-list-link ">Sharing</a> <ol class="menu-list-child-list "> <li class="menu-list-item "><a href="#setup" class=menu-list-link >Setup</a> <li class="menu-list-item "><a href="#formatting" class=menu-list-link >Formatting</a> <li class="menu-list-item "><a href="#testing" class=menu-list-link >Testing</a> <li class="menu-list-item "><a href="#documentation" class=menu-list-link >Documentation</a> <li class="menu-list-item "><a href="#compatibility" class=menu-list-link >Compatibility</a> <li class="menu-list-item "><a href="#reproducibility" class=menu-list-link >Reproducibility</a> <li class="menu-list-item "><a href="#publishing" class=menu-list-link >Publishing</a> <li class="menu-list-item "><a href="#collaboration" class=menu-list-link >Collaboration</a> <li class="menu-list-item "><a href="#citations" class=menu-list-link >Citations</a> </ol> <li class="menu-list-item "><a href="/ModernJuliaWorkflows/pages/optimizing/" class="menu-list-link ">Optimizing</a> <ol class="menu-list-child-list "> <li class="menu-list-item "><a href="#principles" class=menu-list-link >Principles</a> <li class="menu-list-item "><a href="#measurements" class=menu-list-link >Measurements</a> <li class="menu-list-item "><a href="#profiling" class=menu-list-link >Profiling</a> <li class="menu-list-item "><a href="#type_stability" class=menu-list-link >Type stability</a> <li class="menu-list-item "><a href="#precompilation" class=menu-list-link >Precompilation</a> <li class="menu-list-item "><a href="#parallelism" class=menu-list-link >Parallelism</a> <li class="menu-list-item "><a href="#simd" class=menu-list-link >SIMD</a> <li class="menu-list-item "><a href="#allocations" class=menu-list-link >Allocations</a> </ol> <li class="menu-list-item "><a href="/ModernJuliaWorkflows/pages/further/" class="menu-list-link ">Going further</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="#official" class=menu-list-link >Official</a> <li class="menu-list-item "><a href="#tutorials" class=menu-list-link >Tutorials</a> <li class="menu-list-item "><a href="#blogs" class=menu-list-link >Blogs</a> <li class="menu-list-item "><a href="#videos" class=menu-list-link >Videos</a> <li class="menu-list-item "><a href="#lore" class=menu-list-link >Lore</a> </ul> </ul> </div> <div class=footer > This is <em>Just the docs</em>, adapted from the <a href="https://github.com/pmarsceill/just-the-docs" target=_blank >Jekyll theme</a>. </div> </div> <div class=main-content-wrap > <div class=main-content > <div class=main-header > <a id=github  href="/ModernJuliaWorkflows//github.com/tlienart/Franklin.jl">Franklin on GitHub</a> </div> <div class=franklin-content ><h1 id=writing_julia_code ><a href="#writing_julia_code" class=header-anchor >Writing Julia code</a></h1> <h2 id=installation ><a href="#installation" class=header-anchor >Installation</a></h2> <p>The most natural &#40;but not the best&#41; way to install Julia is the <a href="https://julialang.org/downloads/">downloads page</a>. Don&#39;t forget to also read the platform-specific instructions for <a href="https://julialang.org/downloads/platform/#windows">Windows</a>, <a href="https://julialang.org/downloads/platform/#macos">macOS</a> or <a href="https://julialang.org/downloads/platform/#linux_and_freebsd">Linux</a>. This official page is where you will find the &quot;current stable release&quot;, which everyone should use by default. At the time of writing, it is version 1.9.2. But of course new versions are released regularly, and you will need to keep up. On the other hand, you may want to test your code on older versions and ensure compatibility.</p> <p>There is an easy solution to manage multiple Julia versions on your computer, and it is called <a href="https://github.com/JuliaLang/juliaup">juliaup</a>. You can get it from the <a href="https://github.com/JuliaLang/juliaup#windows">Windows store</a>, or install it from the <a href="https://github.com/JuliaLang/juliaup#mac-and-linux">command line</a> on Unix systems. It provides <a href="https://github.com/JuliaLang/juliaup#using-juliaup">various utilities</a> to organize, update and switch between Julia versions. As a bonus, you no longer have to specify the path to your Julia executable: juliaup takes care of that for you.</p> <p>The main thing to understand about juliaup is that it provides adaptive shortcuts called &quot;channels&quot;, which allow you to access specific Julia versions without giving their exact number. The most important ones are:</p> <ul> <li><p><code>release</code>, which is bound to the <a href="https://julialang.org/downloads/#current_stable_release">current stable release</a>;</p> <li><p><code>lts</code>, which is bound to the <a href="https://julialang.org/downloads/#long_term_support_release">long-term support version</a>.</p> <li><p><code>rc</code>, which is bound to the upcoming release candidate;</p> </ul> <p>For instance, you can install the LTS version with</p> <pre><code class="bash hljs">juliaup add lts</code></pre>
<p>When new versions are tagged, the binding of a given channel can change, and a new executable might need to be downloaded. If you want to catch up with the latest developments, all it takes is to run</p>
<pre><code class="bash hljs">juliaup update</code></pre>
<p>If you want an overview of the channels installed on your computer, just use</p>
<pre><code class="bash hljs">juliaup status</code></pre>
<h2 id=development_environments ><a href="#development_environments" class=header-anchor >Development environments</a></h2>
<p>Depending on your experience and how you use Julia, some ways of writing code may be more familiar or useful to you than others. Data scientists commonly prefer notebook environments such as those provided by <a href="https://jupyter.org/">Jupyter</a> through the <a href="https://github.com/JuliaLang/IJulia.jl">IJulia.jl</a> package, or Julia&#39;s own reactive notebooks from <a href="https://plutojl.org/">Pluto.jl</a>. On the other hand, package developers or those who write a lot of scripts will prefer the more traditional programming environment provided by a text editor or integrated development environment &#40;IDE&#41;.</p>
<p>For some, the Julia REPL &#40;Read Evaluate Print Loop&#41; itself is all that&#39;s necessary. The REPL&#39;s primary function is to run code in &quot;Julian&quot; mode, but it also has a number of other modes that expand what can be done from inside Julia. Each mode is enterred by typing a character into the REPL from Julian mode, and can be exited by deleting this character with backspace.</p>
<h3 id=help_mode ><a href="#help_mode" class=header-anchor >Help mode &#40;<code>?</code>&#41;</a></h3>
<p>By entering a <code>?</code>, you can query information and metadata about Julia objects and unicode symbols simply by typing their name into the command line. For functions, types, and variables, the query fetches things such as documentation, type fields and supertypes, and in which file the object is defined.</p>
<pre><code class="julia hljs">help?&gt; <span class=hljs-built_in >Int</span>
search: <span class=hljs-built_in >Int</span> <span class=hljs-built_in >Int8</span> <span class=hljs-built_in >Int64</span> <span class=hljs-built_in >Int32</span> <span class=hljs-built_in >Int16</span> <span class=hljs-built_in >Int128</span> <span class=hljs-built_in >Integer</span> intersect intersect!

  <span class=hljs-built_in >Int64</span> &lt;: <span class=hljs-built_in >Signed</span>


  <span class=hljs-number >64</span>-bit signed integer type.</code></pre>
<p>For unicode symbols, the query will return how to type the symbol in the REPL, which is useful when you copy-paste a symbol in without knowing its name, and fetch information about the object the symbol is bound to, just as above.</p>
<h3 id=pkg_mode ><a href="#pkg_mode" class=header-anchor >Pkg mode &#40;<code>&#93;</code>&#41;</a></h3>
<p>Pkg mode is for managing environments and packages that is based on the Rust package manager &quot;cargo&quot;. By pressing <code>&#93;</code> in Julian mode, you can <code>add</code>, <code>update</code> &#40;or <code>up</code>&#41; and <code>remove</code> &#40;or <code>rm</code>&#41; packages, <code>activate</code> different local or global environments, and get the <code>status</code> &#40;or <code>st</code>&#41; of your current environment.</p>
<p>More detail on using Pkg.jl and Pkg mode, see the &#91;#Package-Management&#93; section or the &#91;#Setup&#93; section of the <a href="./sharing.md#setup">Sharing Julia code</a> post.</p>
<h3 id=shell_mode ><a href="#shell_mode" class=header-anchor >Shell mode&#40;<code>;</code>&#41;</a></h3>
<p>Shell mode: Functions as a terminal inside Julia, you can also execude shell commands from Julian mode. Here&#39;s an example</p>
<pre><code class="julia hljs">an_example()</code></pre>
<ul>
<li><p><a href="https://code.visualstudio.com/">VSCode</a> / <a href="https://vscodium.com/">VSCodium</a> &#43; <a href="https://www.julia-vscode.org/">Julia VSCode extension</a></p>

<li><p><a href="https://www.gnu.org/software/emacs/">emacs</a> / <a href="https://www.vim.org/">vim</a> / other IDEs &#43; <a href="https://github.com/JuliaEditorSupport">JuliaEditorSupport</a></p>

<li><p><a href="https://jupyter.org/">Jupyter</a> / <a href="https://github.com/JuliaLang/IJulia.jl">IJulia.jl</a></p>

<li><p><a href="https://plutojl.org/">Pluto.jl</a></p>

</ul>
<h2 id=running_code ><a href="#running_code" class=header-anchor >Running code</a></h2>
<p>All executed Julia code ends up in a REPL<sup id="fnref:1"><a href="#fndef:1" class=fnref >[1]</a></sup>, but how it gets there can vary greatly.</p>
<table class=fndef  id="fndef:1">
    <tr>
        <td class=fndef-backref ><a href="#fnref:1">[1]</a>
        <td class=fndef-content >Unless you&#39;re compiling binaries with <a href="https://github.com/brenhinkeller/StaticTools.jl">StaticTools.jl</a>.
    
</table>

<p>Most people develop Julia using a tool that allows for <a href="https://en.wikipedia.org/wiki/Interactive_programming">interactive development</a>. In VScode, you can <a href="https://www.julia-vscode.org/docs/stable/userguide/runningcode/">run code</a> in the following useful ways:</p>
<ul>
<li><p>For interactive development, the standard way to use Julia, you can use hotkeys to run selections, lines, sections, or whole files in the currently open REPL.</p>
<ul>
<li><p>Select a part of code to run only that part,</p>

<li><p>Put your cursor inside or after a language construct, such as a definition or function call, to run the whole construct,</p>

<li><p>Use the &quot;run file in REPL&quot; hotkey to do just that.</p>

</ul>

<li><p>You can run entire scripts from a new Julia session each time, but this isn&#39;t great as it takes a while to start a new REPL each time.   To work with a &#40;more or less&#41; fresh workspace each time, you should bundle code into <a href="#package-management">local packages</a>.</p>

</ul>
<p>Some code, however, you want to run on startup, every time Julia is loaded. While VSCode has settings that allow you to specify startup flags, more powerful is its ability to automatically run a <a href="https://docs.julialang.org/en/v1/manual/command-line-interface/#Startup-file">startup file</a>. This allows you to, among other things, load packages that improves your development experience or contain functionality that you use very often.</p>
<p>It&#39;s tempting to put a lot of code in your <code>startup.jl</code> file for convenience&#39;s sake, but this convenience comes at a cost of increasing your startup time as it is executed. To balance convenience and time, we can use AST transformations to conditionally load functionality from packages only when necessary. We tell the REPL to listen for a set of user-defined functions or macros every time a command is sent to be executed; when one is detected, before executing the command, it will first execute the corresponding <code>using</code> statement to allow the function or macro to be called.</p>
<pre><code class="julia hljs"><span class=hljs-literal >ENV</span>[<span class=hljs-string >&quot;JULIA_EDITOR&quot;</span>] = <span class=hljs-string >&quot;code&quot;</span>

<span class=hljs-keyword >using</span> Revise
<span class=hljs-keyword >using</span> OhMyREPL

colorscheme!(<span class=hljs-string >&quot;GruvboxDark&quot;</span>)
OhMyREPL.enable_pass!(<span class=hljs-string >&quot;RainbowBrackets&quot;</span>, <span class=hljs-literal >false</span>)

<span class=hljs-keyword >if</span> Base.isinteractive() &amp;&amp;
    (<span class=hljs-keyword >local</span> REPL = get(Base.loaded_modules, Base.PkgId(Base.UUID(<span class=hljs-string >&quot;3fa0cd96-eef1-5676-8a61-b3b8758bbffb&quot;</span>), <span class=hljs-string >&quot;REPL&quot;</span>), <span class=hljs-literal >nothing</span>); REPL !== <span class=hljs-literal >nothing</span>)

    <span class=hljs-comment ># Automatically load tooling on demand:</span>
    <span class=hljs-comment ># - BenchmarkTools.jl when encountering @btime or @benchmark</span>
    <span class=hljs-comment ># - Cthulhu.jl when encountering @descend(_code_(typed|warntype))</span>
    <span class=hljs-comment ># - Debugger.jl when encountering @enter or @run</span>
    <span class=hljs-comment ># - Profile.jl when encountering @profile</span>
    <span class=hljs-comment ># - ProfileView.jl when encountering @profview</span>
    <span class=hljs-keyword >local</span> tooling_dict = <span class=hljs-built_in >Dict</span>{<span class=hljs-built_in >Symbol</span>,<span class=hljs-built_in >Vector</span>{<span class=hljs-built_in >Symbol</span>}}(
        :BenchmarkTools =&gt; <span class=hljs-built_in >Symbol</span>.([<span class=hljs-string >&quot;@btime&quot;</span>, <span class=hljs-string >&quot;@benchmark&quot;</span>]),
        :Cthulhu        =&gt; <span class=hljs-built_in >Symbol</span>.([<span class=hljs-string >&quot;@descend&quot;</span>, <span class=hljs-string >&quot;@descend_code_typed&quot;</span>, <span class=hljs-string >&quot;@descend_code_warntype&quot;</span>]),
        :Debugger       =&gt; <span class=hljs-built_in >Symbol</span>.([<span class=hljs-string >&quot;@enter&quot;</span>, <span class=hljs-string >&quot;@run&quot;</span>]),
        :Profile        =&gt; <span class=hljs-built_in >Symbol</span>.([<span class=hljs-string >&quot;@profile&quot;</span>]),
        :ProfileView    =&gt; <span class=hljs-built_in >Symbol</span>.([<span class=hljs-string >&quot;@profview&quot;</span>]),
    )
    pushfirst!(REPL.repl_ast_transforms, <span class=hljs-keyword >function</span>(ast::<span class=hljs-built_in >Union</span>{<span class=hljs-built_in >Expr</span>,<span class=hljs-built_in >Nothing</span>})
        <span class=hljs-keyword >function</span> contains_macro(ast, m)
            <span class=hljs-keyword >return</span> ast <span class=hljs-keyword >isa</span> <span class=hljs-built_in >Expr</span> &amp;&amp; (
                (Meta.isexpr(ast, :macrocall) &amp;&amp; ast.args[<span class=hljs-number >1</span>] === m) ||
                any(x -&gt; contains_macro(x, m), ast.args)
            )
        <span class=hljs-keyword >end</span>
        <span class=hljs-keyword >for</span> (mod, macros) <span class=hljs-keyword >in</span> tooling_dict
            <span class=hljs-keyword >if</span> any(contains_macro(ast, s) <span class=hljs-keyword >for</span> s <span class=hljs-keyword >in</span> macros) &amp;&amp; !isdefined(Main, mod)
                <span class=hljs-meta >@info</span> <span class=hljs-string >&quot;Loading <span class=hljs-variable >$mod</span> ...&quot;</span>
                <span class=hljs-keyword >try</span>
                    Core.eval(Main, :(<span class=hljs-keyword >using</span> $mod))
                <span class=hljs-keyword >catch</span> err
                    <span class=hljs-meta >@info</span> <span class=hljs-string >&quot;Failed to automatically load <span class=hljs-variable >$mod</span>&quot;</span> exception=err
                <span class=hljs-keyword >end</span>
            <span class=hljs-keyword >end</span>
        <span class=hljs-keyword >end</span>
        <span class=hljs-keyword >return</span> ast
    <span class=hljs-keyword >end</span>)
<span class=hljs-keyword >end</span></code></pre>
<h2 id=environment_and_package_management ><a href="#environment_and_package_management" class=header-anchor >Environment and Package Management</a></h2>
<ul>
<li><p><a href="https://github.com/JuliaLang/Pkg.jl">Pkg.jl</a></p>

<li><p>stacking environments</p>

<li><p><a href="https://www.julia-vscode.org/docs/stable/userguide/env/">environments in VSCode</a></p>

<li><p><a href="https://github.com/timholy/Revise.jl">Revise.jl</a></p>

</ul>
<h2 id=esthetics ><a href="#esthetics" class=header-anchor >Esthetics</a></h2>
<ul>
<li><p><a href="https://github.com/FedeClaudi/Term.jl">Term.jl</a></p>

<li><p><a href="https://github.com/KristofferC/OhMyREPL.jl">OhMyREPL.jl</a></p>

<li><p><a href="https://github.com/BioTurboNick/AbbreviatedStackTraces.jl">AbbreviatedStackTraces.jl</a></p>

<li><p><a href="https://github.com/MichaelHatherly/InteractiveErrors.jl">InteractiveErrors.jl</a></p>

<li><p><a href="https://github.com/timholy/ProgressMeter.jl">ProgressMeter.jl</a></p>

</ul>
<h2 id=debugging ><a href="#debugging" class=header-anchor >Debugging</a></h2>
<ul>
<li><p><a href="https://github.com/JuliaDebug/Infiltrator.jl">Infiltrator.jl</a></p>

<li><p><a href="https://github.com/JuliaDebug/Debugger.jl">Debugger.jl</a></p>

<li><p><a href="https://www.julia-vscode.org/docs/stable/userguide/debugging/">debugging in VSCode</a></p>

</ul>
<h2 id=other_languages ><a href="#other_languages" class=header-anchor >Other languages</a></h2>
<ul>
<li><p><a href="https://docs.julialang.org/en/v1/manual/calling-c-and-fortran-code/">C and Fortran</a></p>

<li><p><a href="https://github.com/cjdoris/CondaPkg.jl">CondaPkg.jl</a> &#43; <a href="https://github.com/cjdoris/PythonCall.jl">PythonCall.jl</a></p>

<li><p><a href="https://github.com/JuliaInterop">JuliaInterOp</a> &#40;<a href="https://github.com/JuliaInterop/RCall.jl">RCall.jl</a>, <a href="https://github.com/JuliaInterop/Cxx.jl">Cxx.jl</a>&#41;</p>

</ul>
<h2 id=getting_help ><a href="#getting_help" class=header-anchor >Getting help</a></h2>
<ul>
<li><p><a href="https://github.com/JuliaCommunity/StartHere.jl">StartHere.jl</a></p>

<li><p><a href="https://julialang.org/community/">community spaces</a></p>

</ul>
<div class=page-foot >
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> Guillaume Dalle & Jacobus Smit. Last modified: July 08, 2023.
    Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
</div>
</div>
    </div> 
    </div> 
    </div> <!-- end of class page-wrap-->
    
    
      <script src="/ModernJuliaWorkflows/libs/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();hljs.configure({tabReplace: '    '});</script>